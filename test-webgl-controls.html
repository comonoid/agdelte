<!DOCTYPE html>
<html>
<head>
  <title>WebGL Controls Debug</title>
  <style>
    body { font-family: monospace; padding: 20px; }
    .error { color: red; background: #fee; padding: 10px; margin: 10px 0; }
    .success { color: green; }
    canvas { border: 2px solid #000; margin: 10px 0; }
  </style>
</head>
<body>
  <h1>WebGL Controls Demo - Debug</h1>
  <div id="status">Loading...</div>
  <div id="app" data-agdelte="WebGLControlsDemo"></div>

  <script type="module">
    const status = document.getElementById('status');

    window.addEventListener('error', (e) => {
      status.innerHTML += `<div class="error">Error: ${e.message}<br>${e.filename}:${e.lineno}</div>`;
    });

    window.addEventListener('unhandledrejection', (e) => {
      status.innerHTML += `<div class="error">Promise rejection: ${e.reason}</div>`;
    });

    try {
      status.innerHTML = '<div class="success">Starting import...</div>';
      const module = await import('./_build/jAgda.WebGLControlsDemo.mjs');
      status.innerHTML += '<div class="success">Module loaded! Keys: ' + Object.keys(module.default).join(', ') + '</div>';

      const { mountReactive } = await import('./runtime/reactive.js');
      status.innerHTML += '<div class="success">Runtime loaded!</div>';

      await mountReactive('WebGLControlsDemo', document.getElementById('app'));
      status.innerHTML += '<div class="success">App mounted!</div>';
    } catch (e) {
      status.innerHTML += `<div class="error">Fatal error: ${e.message}<pre>${e.stack}</pre></div>`;
    }
  </script>
</body>
</html>
